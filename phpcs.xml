<?xml version="1.0"?>
<ruleset name="WordPress Plugin (Jamrock)">
  <description>WordPress Core/Extra/Docs + PHPCompatibilityWP for Jamrock plugin.</description>

  <!-- Scan the repo -->
  <file>./</file>

  <!-- Exclusions -->
  <exclude-pattern>vendor/*</exclude-pattern>
  <exclude-pattern>node_modules/*</exclude-pattern>
  <exclude-pattern>assets/*</exclude-pattern>
  <exclude-pattern>*.min.js</exclude-pattern>
  <exclude-pattern>*.min.css</exclude-pattern>
  <exclude-pattern>tests/*</exclude-pattern>
  <exclude-pattern>build/*</exclude-pattern>
  <exclude-pattern>dist/*</exclude-pattern>

  <!-- Arguments -->
  <arg value="ps"/> <!-- show sniff codes -->
  <arg name="extensions" value="php,inc,php.stub"/>
  <arg name="report" value="full"/>
  <arg name="parallel" value="8"/>
  <arg name="cache" value=".phpcs.cache"/>

  <!-- Standards -->
  <rule ref="WordPress-Core"/>
  <rule ref="WordPress-Extra"/>
  <rule ref="WordPress-Docs"/>

  <!-- PHPCompatibilityWP (set your project PHP range) -->
  <rule ref="PHPCompatibilityWP"/>
  <config name="testVersion" value="7.4-"/>
  <!-- Tell PHPCompatibilityWP the minimum WP version you support -->
  <config name="minimum_supported_wp_version" value="6.2"/>

  <!-- i18n: enforce correct text domain -->
  <rule ref="WordPress.WP.I18n">
    <properties>
      <property name="text_domain" type="array">
        <element value="jamrock"/>
      </property>
    </properties>
  </rule>

  <!-- Security-focused sniffs -->
  <rule ref="WordPress.Security.EscapeOutput"/>
  <rule ref="WordPress.Security.NonceVerification"/>
  <rule ref="WordPress.DB.PreparedSQL"/>

  <!-- Relax a few filename rules for PSR-4 structures -->
  <rule ref="WordPress">
    <exclude name="WordPress.Files.FileName.InvalidClassFileName"/>
    <exclude name="WordPress.Files.FileName.NotHyphenatedLowercase"/>
  </rule>

  <!-- Optional: if short ternary disallow is too strict in your codebase, comment this out
  <exclude name="Universal.Operators.DisallowShortTernary.Found"/>
  -->
</ruleset>